# Yoach1 快速参考指南

## 游戏模式一览表

| 模式 | ID | 命令示例 | 触发颜色 | 说明 |
|------|----|---------|---------|----|
| **手动** | 1 | `1,999,999,999,999,999,999,50` | 蓝色系 | TOF检测 |
| **随机** | 2 | `2,999,999,999,999,999,999,999` | 绿/黄/红 | 随机颜色 |
| **定时** | 3 | `3,999,5000,999,999,999,999,999` | 蓝/橙 | 5秒超时 |
| **双人** | 4 | `4,999,999,999,999,999,0,999` | 橙/蓝 | 双色切换 |
| **节奏** | 5 | `5,255,0,0,0,0,1,999` | 自定义 | RGB控制 |
| **开启** | 11 | `11,999,999,999,999,999,999,999` | 蓝色动画 | 初始化 |
| **关闭** | 12 | `12,999,999,999,999,999,999,999` | 红色闪烁 | 关机序列 |
| **终止** | 13 | `13,999,999,999,999,999,999,999` | 无 | 紧急停止 |
| **配置** | 100 | `100,4,999,999,999,999,999,999` | 白色 | 闪烁4次 |

## 节奏模式RGB快速设置

### 基础颜色
```
红色: 5,255,0,0,0,0,1,999
绿色: 5,0,255,0,0,0,1,999
蓝色: 5,0,0,255,0,0,1,999
黄色: 5,255,255,0,0,0,1,999
青色: 5,0,255,255,0,0,1,999
品红: 5,255,0,255,0,0,1,999
白色: 5,255,255,255,0,0,1,999
```

### 参数说明
```
5,红,绿,蓝,定时器,蜂鸣器,传感器,999
  │  │  │   │      │      │
  │  │  │   │      │      └─ 0:无 1:TOF 2:雷达 3:双传感器
  │  │  │   │      └─────── 蜂鸣器时间(ms)
  │  │  │   └────────────── 自动关闭时间(ms), 0=不关闭
  │  │  └─────────────────── 蓝色值(0-255)
  │  └────────────────────── 绿色值(0-255)
  └───────────────────────── 红色值(0-255)
```

## 手动模式颜色逻辑

```
Process值 → 显示颜色
> 50     → 浅蓝 (209,231,242)
26-50    → 天蓝 (0,255,255)
≤ 25     → 深蓝 (0,0,178)
```

## 设备通知消息

| 消息 | 含义 | 触发场景 |
|------|------|---------|
| `manual` | 手动模式触发 | TOF检测到物体 |
| `random` | 随机模式触发 | TOF检测到物体 |
| `timed` | 定时模式触发 | 雷达检测到物体 |
| `rhythm` | 节奏模式触发 | 传感器检测 |
| `double0` | 双人模式0触发 | 索引0检测 |
| `double1` | 双人模式1触发 | 索引1检测 |
| `Timed Mode Overtimed` | 超时 | 定时器到期 |
| `configDone:4` | 配置完成 | 闪烁4次完成 |

## BLE连接信息

```
服务UUID: ab0828b1-198e-4351-b779-901fa0e0371e
消息特征: 4ac8a696-9736-4e5d-932b-e9b31405049c
设备名称: PRO-XXXX (XXXX为MAC后4位)
```

## 调试开关

在 `Global_VAR.h` 中设置：
```cpp
#define DEBUGGER 0      // 0:关闭 1:开启GPIO和心跳日志
#define DEBUG_SENSOR 1  // 0:关闭 1:开启传感器日志
```

## 常见操作流程

### 启动设备
```
1. 发送: 11,999,999,999,999,999,999,999
2. 等待初始化完成
3. 发送游戏模式命令
```

### 切换颜色（节奏模式）
```
1. 进入节奏模式: 5,255,0,0,0,0,1,999
2. 改变颜色: 5,0,255,0,0,0,1,999
3. 颜色立即更新
```

### 紧急停止
```
发送: 13,999,999,999,999,999,999,999
效果: 立即停止所有操作，关闭灯光
```

### 配置闪烁
```
发送: 100,3,999,999,999,999,999,999
效果: 白光闪烁3次
```

## 故障排除

| 问题 | 可能原因 | 解决方法 |
|------|---------|---------|
| 连接失败 | 设备未开机/蓝牙未开 | 检查电源和蓝牙 |
| 命令无响应 | 格式错误 | 确保8个字段 |
| 颜色不变 | 模式错误 | 检查是否在正确模式 |
| 传感器无反应 | 传感器模式设为0 | 设置正确的sensorMode |

---

**版本**: v0.0.2 | **更新日期**: 2024-11-23